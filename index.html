<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Notion HR App - Productivo</title>

    <link rel="stylesheet" href="./assets/css/tailwind.min.css">
    <link rel="manifest" href="./manifest.json">

    <script src="./assets/js/sql-wasm-browser.min.js"></script>
<script src="./assets/js/sql-wasm.wasm"></script>

    <style>
        body { font-family: 'Inter', sans-serif; }
        /* Ocultar barra de desplazamiento globalmente */
        ::-webkit-scrollbar { display: none; }
        body { -ms-overflow-style: none; scrollbar-width: none; }
    </style>
</head>
<body>

<div id="app" class="flex h-screen bg-gray-50">

    <button id="menu-toggle" class="fixed top-4 left-4 z-50 p-2 bg-indigo-600 text-white rounded-lg shadow-lg md:hidden hidden">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" /></svg>
    </button>
    
    <div id="sidebar" class="w-64 bg-white border-r border-gray-200 flex-shrink-0 p-4 overflow-y-auto shadow-xl md:shadow-none">
        
        <h2 class="text-2xl font-extrabold text-gray-900 mb-6">Notion HR</h2>
        
        <div class="mb-6">
            <h3 class="text-xs font-semibold uppercase text-gray-400 mb-2">Workspaces</h3>
            <div id="workspaces-list" class="space-y-1">
                </div>
            
            <button id="add-workspace" onclick="addWorkspace()" 
                class="mt-2 w-full text-left p-2 rounded-lg text-sm text-gray-600 hover:bg-indigo-50 hover:text-indigo-700 transition duration-150 flex items-center gap-3">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" /></svg>
                <span>Crear Espacio</span>
            </button>
        </div>

        <div class="mt-6 pt-4 border-t border-gray-100">
            <h3 class="text-xs font-semibold uppercase text-gray-400 mb-2">Vistas Personalizadas</h3>
            <div id="injected-views-container" class="space-y-1">
                </div>
        </div>
        
    </div>
    
    <div id="main-content" class="flex-grow flex flex-col overflow-y-auto">
        
        <header class="bg-white shadow-sm flex-shrink-0 sticky top-0 z-10 border-b border-gray-200">
            <div class="p-4 flex items-center justify-between">
                
                <h1 id="workspace-title" class="text-2xl font-bold text-gray-800">Workspace Activo</h1>
                
                <nav id="view-tabs" class="flex items-center space-x-1 p-1 bg-gray-100 rounded-lg">
                    </nav>
                
                <div class="flex items-center space-x-3">
                    <button id="add-record-btn" onclick="showItemModal()" 
                        class="px-4 py-2 bg-indigo-600 text-white rounded-lg text-sm font-semibold shadow-md hover:bg-indigo-700 transition duration-150">
                        + Nuevo Item
                    </button>
                    <button id="export-btn" onclick="exportToGist()" 
                        class="p-2 text-gray-500 rounded-full hover:bg-gray-100 transition duration-150" title="Exportar a Gist">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" /></svg>
                    </button>
                </div>
            </div>
        </header>

        <div id="current-view-container" class="flex-grow p-6 overflow-y-auto">
            <div id="content-view" class="min-h-full">
                <h2 class="text-center text-gray-400 py-10">Cargando aplicaci√≥n...</h2>
            </div>
        </div>
        
    </div>
</div>

<div id="item-modal" class="fixed inset-0 bg-black/40 hidden items-center justify-center z-40 transition-opacity duration-300 opacity-0">...</div>
<div id="app-message" class="fixed bottom-4 right-4 p-3 rounded-lg shadow-xl text-sm z-50 hidden"></div>



<script src="./assets/js/db-sqlite.js"></script>

<script src="./assets/js/properties.js"></script>
<script src="./assets/js/rules.js"></script>

<script src="./assets/js/responsive.js"></script>
<script src="./assets/js/zoom.js"></script>

<script src="./assets/js/views.js"></script> 

<script src="./assets/js/agendaView.js"></script>
<script src="./assets/js/kanbanNative.js"></script>
<script src="./assets/js/menuInject.js"></script>


<script>
    // Solo se llama al inicio de la app y el registro del Service Worker.
    if (typeof initApp === 'function') {
        initApp(); 
    }

    if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('./sw.js').catch(console.error);
    }
</script>

</body>
</html>
